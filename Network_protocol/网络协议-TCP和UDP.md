
* 本文主要内容为**刘超**老师在极客时间上的《趣谈网络协议》课程学习笔记

----


### 1. TCP 和 UDP 的区别简述


* TCP 是面向连接的，面向连接的协议会先建立连接
> 建立连接 ： 为了在客户顿啊和服务算维护联机玩，而建立一定的数据结构维护双方交互的状态，

* 通过 TCP 连接传输的数据，**无差错，不丢失，不重复**； 而 UDP 和 IP 包一样，**不保证不丢失，不保证按照顺序到达**；

* TCP 是面向**字节流**的，发送的时候发的是一个流，没头没尾；； 而 UDP 继承了 IP的特性 基于数据包，**一个一个的发**

* TCP 有 拥赛控制的，当包丢弃了或者网络环境不好，根据情况调整自己的行为， UDP 不会

----


### 2. UDP 包的 头

> 发送的 UDP 包到达目的机器后， 匹配 MAC 地址之后，取下 MAC 地址，将剩下的包传给 处理 IP层的代码， 把IP头 取下来， 发现 IP匹配

* 发送包的时候有一个 8 位的协议， 数据是 TCP 还是 UDP；知道了 UDP 的格式，就可以解析出来，之后数据交给应用程序

*  应用程序会监听一个端口，不同的应用程序对应不同的端口号， TCP  和 UDP 里面含有端口号，根据端口号，将数据交给相应的应用程序


----

### 3. UDP 的特点

* 不会建立连接，虽然有端口号，但是在监听的地方，谁都可以给他传输数据，他也可以传给任何人数据，同时传给多人数据

* 没有拥塞机制，网络包丢了，还会一直一直的发

---

### 4. UDP 使用场景

* 网络环境好（内网），  丢包不敏感

* 可以广播或者组播的应用
> 多播-组播 ： 组播地址，使用这个地址，可以将包组播给一批机器。

* 处理速度快，**低延时**一直发送， 不太在意丢包的应用

------


### 5.  UDP 的应用实例


##### 1. 网页或者 APP 的访问

* 原本网页访问 都是基于 HTTP协议， 而 HTTP 协议是基于 TCP的，建立连接需要多次的交互；而且 TCP 严格的顺序策略是的共享通道中，前一个不来，后一个和前一个没关系也要等着，延时加大

* QUIC  Quick UDP Internet COnnections，快速UDP 互联网连接） ---- 谷歌的改进通信协议，减少网络通信的延时。



##### 2. 流媒体的协议

> 直播的协议多是 RTMP

* RTMP 协议基于 TCP ，有着严格的传输顺序，起那一个不到，下一个到了 也不行

* 而且 对于视频播放，有的包可以丢， 隔几个帧丢一个包，不太会发现、

* TCP 在网络不好的时候，主动降低发送的速度， 本来就卡，会跟家卡

**直播应用现都是基于UDP实现视频传输协议**

##### 3. 实时游戏

> 对战游戏， 玩家通过客户端发送给服务器鼠标和键盘的位置，服务器处理每个用户发来的场景，处理完饭回客户端，客户端解析相应，渲染最新的场景展示给玩家

* 实时游戏需要客户端和服务器建立长连接，保证实时传输，一台机器能够支撑的TCP连接数目有限，，而 UDP没有连接，可以应对海量客户端

* TCP 强顺序，出现一个数据包丢失，所有数据都要等待这个数据包重发，客户端等待接收数据，会卡顿


##### 4. 物联网

* 物联网对实时性要求较高， TCP 延时较大

* 物联网终端资源少，维护TCP协议代价大


##### 5. 移动通信领域

暂无

























































